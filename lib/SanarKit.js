var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _socket=_interopRequireDefault(require("socket.io-client"));var _reactNativeDeviceInfo=_interopRequireDefault(require("react-native-device-info"));var _utils=require("./utils");var SanarKit=function(){function SanarKit(){(0,_classCallCheck2.default)(this,SanarKit);this.connected=false;this._isChatEnabled=false;}return(0,_createClass2.default)(SanarKit,[{key:"isChatEnabled",get:function get(){return this._isChatEnabled;}},{key:"setIsChatEnabled",value:function setIsChatEnabled(value){this._isChatEnabled=value;}},{key:"connect",value:function(){var _connect=(0,_asyncToGenerator2.default)(function*(cid,info,lang){try{var did=yield _reactNativeDeviceInfo.default.getUniqueId();var _yield$getInfo=yield(0,_utils.getInfo)(cid,info,lang||'en'),status=_yield$getInfo.status,data=_yield$getInfo.data,message=_yield$getInfo.message,error_message=_yield$getInfo.error_message;if(status==1000){this.eventListner=(0,_socket.default)(data.messagingUrl,{query:`uid=${data.uid}&did=${did}`});this.session=data;this.info=info;this.connected=true;console.log('Connected successfully : ',this.connected);return{message:message,status:true};}else{this.connected=false;console.log('Connected failed : ',this.connected);return{message:error_message,status:false};};}catch(error){this.connected=false;console.log('Connected failed : ',this.connected);throw error;}});function connect(_x,_x2,_x3){return _connect.apply(this,arguments);}return connect;}()},{key:"disconnect",value:function disconnect(){if(this.eventListner){this.eventListner.disconnect();console.log("Disconnected with Sanar");}this.session=null;this.info=null;this.connected=false;}}]);}();;var _default=exports.default=new SanarKit();